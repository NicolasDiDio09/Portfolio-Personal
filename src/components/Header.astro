---
// Header.astro
import ThemeToggle from './ThemeToggle.astro';
---

<header id="navbar" class="fixed top-0 z-10 w-full flex justify-center px-4 sm:px-6 mt-2 bg-transparent">
  <nav id="navContent"
    class="flex items-center justify-center flex-nowrap 
           gap-2 sm:gap-4 md:gap-5 
           px-3 sm:px-4 md:px-6 py-1 
           text-[13px] sm:text-[14px] font-medium 
           text-gray-600 dark:text-gray-200 
           transition-all duration-300 ease-in-out">
    <a href="#Top" class="px-2 py-1 hover:text-yellow-400 dark:hover:text-yellow-300">Home</a>
    <a href="#About" class="px-2 py-1 hover:text-yellow-400 dark:hover:text-yellow-300">About</a>
    <a href="#Experience" class="px-2 py-1 hover:text-yellow-400 dark:hover:text-yellow-300">Experience</a>
    <a href="#Projects" class="px-2 py-1 hover:text-yellow-400 dark:hover:text-yellow-300">Projects</a>
    <a href="#Contact" class="px-2 py-1 hover:text-yellow-400 dark:hover:text-yellow-300">Contact</a>
    <ThemeToggle />
  </nav>
</header>

<style is:global>
  /* Previene que se rompa en mobile pero SIN barra de desplazamiento */
  #navContent {
    flex-wrap: nowrap;
  }

  @media (max-width: 400px) {
    #navContent {
      gap: 6px;
      font-size: 12px;
    }

    #navContent a,
    #navContent button {
      padding-left: 6px;
      padding-right: 6px;
    }
  }
</style>

<script is:inline>
  const navContent = document.getElementById('navContent');

  const applyScrolledStyles = () => {
    navContent.classList.add(
      'rounded-full',
      'backdrop-blur-md',
      'bg-black/30',
      'dark:bg-white/10',
      'shadow-md',
      'px-4',
      'py-2'
    );
  };

  const removeScrolledStyles = () => {
    navContent.classList.remove(
      'rounded-full',
      'backdrop-blur-md',
      'bg-black/30',
      'dark:bg-white/10',
      'shadow-md',
      'px-4',
      'py-2'
    );
  };

  window.addEventListener('scroll', () => {
    if (window.scrollY > 30) {
      applyScrolledStyles();
    } else {
      removeScrolledStyles();
    }
  });
</script>
